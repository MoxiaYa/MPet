import{r as E,a,w as u,o as f,b as g,c as h,d as B,v as c,e as n,t as C,n as l,f as D,g as Y}from"./_commonjsHelpers.js";import{h as Q,i as I}from"./moment.js";import{l as G,L as v}from"./lodash.js";const M={class:"toolbar"},x=n("i",{class:"iconfont icon-move-full"},null,-1),k=[x],H={__name:"Scene",setup(d){const r=E(""),o=a({resize:!1,top:!0,noClick:!1}),e=a({text:"",show:!1,timer:null});let i=0,s=0;const m=t=>{o[t]=!o[t],window.ElectronIpcRenderer&&window.ElectronIpcRenderer.send("changeConfig",{resize:o.resize})},b=G.exports.debounce(()=>{location.reload()},1e3),p=()=>{!r.value||v.L2Dwidget.init({display:{width:i*.8,height:s},model:{jsonPath:r.value}})};return u(()=>r.value,(t,A)=>{t!==A&&p()},{}),f(()=>{i=document.documentElement.clientWidth,s=document.documentElement.clientHeight,window.onresize=b,setTimeout(()=>{window.ElectronIpcRenderer&&(window.ElectronIpcRenderer.send("init"),window.ElectronIpcRenderer.on("init",(t,A)=>{A&&(o.resize=A.resize,r.value=A.modelJsonPath)}),window.ElectronIpcRenderer.on("configToPage",(t,A)=>{A=JSON.parse(A),o[A.key]=A.value}),window.ElectronIpcRenderer.on("showMessage",(t,A)=>{e.timer&&clearTimeout(e.timer),A.type==="time"?A.value?e.text=A.value.replace(/{{time}}/g,Q().format("HH:mm")):e.text=`\u5582\u5582\u5582\uFF0C\u73B0\u5728\u5DF2\u7ECF${Q().format("HH:mm")}\u4E86\u54DF~`:e.text=A.value,e.show=!0,e.timer=setTimeout(()=>{e.show=!1},A.time||2500)}))},500)}),(t,A)=>(g(),h("div",{class:l({marker:!0,resize:o.resize})},[B(n("div",{class:"message"},C(e.text),513),[[c,e.show]]),B(n("div",M,[n("button",{class:l({"tb-btn":!0,resize:o.resize}),onClick:A[0]||(A[0]=J=>m("resize"))},k,2)],512),[[c,!o.noClick]])],2))}};const z={__name:"App",setup(d){return(r,o)=>(g(),D(H))}},w=Y(z);w.use(I);w.mount("#app");
