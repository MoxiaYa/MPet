import{r as x,a as l,w as v,o as _,b as u,c as k,d,v as c,e as i,t as z,n as p,f as y,g as E}from"./_commonjsHelpers.js";import{h as m,i as R}from"./moment.js";import{l as C,L as I}from"./lodash.js";const H={class:"toolbar"},S=i("button",{class:"tb-btn drag"},"\u62D6",-1),B={__name:"Scene",setup(b){const n=x(""),t=l({resize:!1,top:!0,noClick:!1}),o=l({text:"",show:!1,timer:null});let a=0,s=0;const w=r=>{t[r]=!t[r],window.ElectronIpcRenderer&&window.ElectronIpcRenderer.send("changeConfig",{resize:t.resize})},g=C.exports.debounce(()=>{location.reload()},1e3),f=()=>{!n.value||I.L2Dwidget.init({display:{width:a*.8,height:s},model:{jsonPath:n.value}})};return v(()=>n.value,(r,e)=>{r!==e&&f()},{}),_(()=>{a=document.documentElement.clientWidth,s=document.documentElement.clientHeight,window.onresize=g,setTimeout(()=>{window.ElectronIpcRenderer&&(window.ElectronIpcRenderer.send("init"),window.ElectronIpcRenderer.on("init",(r,e)=>{e&&(t.resize=e.resize,n.value=e.modelJsonPath)}),window.ElectronIpcRenderer.on("configToPage",(r,e)=>{e=JSON.parse(e),t[e.key]=e.value}),window.ElectronIpcRenderer.on("showMessage",(r,e)=>{o.timer&&clearTimeout(o.timer),e.type==="time"?e.value?o.text=e.value.replace(/{{time}}/g,m().format("HH:mm")):o.text=`\u5582\u5582\u5582\uFF0C\u73B0\u5728\u5DF2\u7ECF${m().format("HH:mm")}\u4E86\u54DF~`:o.text=e.value,o.show=!0,o.timer=setTimeout(()=>{o.show=!1},e.time||2500)}))},500)}),(r,e)=>(u(),k("div",{class:p({marker:!0,resize:t.resize})},[d(i("div",{class:"message"},z(o.text),513),[[c,o.show]]),d(i("div",H,[i("button",{class:p({"tb-btn":!0,resize:t.resize}),onClick:e[0]||(e[0]=P=>w("resize"))}," \u53E3 ",2),S],512),[[c,!t.noClick]])],2))}};const D={__name:"App",setup(b){return(n,t)=>(u(),y(B))}},h=E(D);h.use(R);h.mount("#app");
